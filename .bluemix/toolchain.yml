---
name: "Multiple Deployment Options"
description: "Deploy Fibonacci application in Multiple Deployment Options to test and compare the different compute options."

required:
 - deploy
 - compute-options-repo

# Github repos
compute-options-repo:
  service_id: compute-options
  parameters:
    repo_name: "simple-CF-toolchain"
    repo_url: https://github.com/Twanawebtech/simple-CF-toolchain
    type: fork
    has_issues: true

# Pipelines
compute-options-build:
  service_id: pipeline
  parameters:
    name: "compute-options"
    ui-pipeline: true
    configuration:
     content: $file(pipeline.yml)
     env:
      REPO: "compute-options-repo"
      CF_APP_NAME: "{{deploy.parameters.compute-options-app-name}}"
      SPACE_NAME: "{{deploy.parameters.compute-options-space}}"
      ORG_NAME: "{{deploy.parameters.compute-options-organization}}"
      REGION_ID: "{{deploy.parameters.compute-options-region}}"
      ADMIN_USERNAME: "{{deploy.parameters.compute-options-admin-username}}"
      ADMIN_PASSWORD: "{{deploy.parameters.compute-options-admin-password}}"
      WATSON_API_KEY: "{{deploy.parameters.compute-options-watson-api-key}}"
      CLOUDANT_db: "{{deploy.parameters.compute-options-cloudant-db}}"
     execute: true
    services: ["compute-options-repo"]
  hidden: [form, description]

#Deployment
deploy:
  schema:
    $ref: deploy.json
  service-category: pipeline
  parameters:
    compute-options-app-name: "{{name}}"
    compute-options-admin-username: ""
    compute-options-admin-password: ""
    compute-options-watson-api-key: ""
    compute-options-cloudant-db: ""
